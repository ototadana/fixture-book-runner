CLI リファレンス
================

*   [Exec](#Exec)
*   [Expect](#Expect)
*   [Setup](#Setup)
*   [ValidateStorage](#ValidateStorage)


Exec
----
### 機能
引数で指定されたフォルダ及びその配下のフォルダに存在するテスト実行ファイルを全て実行する。  
`testtest` スクリプトから呼び出されているコマンド。

### 呼び出し形式
```bash
java -cp <クラスパス> com.xpfriend.fixture.runner.Exec [テスト実行ファイルが格納されたフォルダのパス] [-debug]
```
*   設定ファイルの executable で指定された名前パターンに合致するものがテスト実行ファイルとしてみなされる。
*   引数が指定されなかった場合、現在のフォルダが指定されたものとみなされる。
*   -debug を指定するとデバッグモードで起動する。
*   テスト実行ファイルの呼び出し時には -server および -class <クラス名> 引数を追加する。
    また、自らが -debug オプションで起動された場合には、-debug オプションも追加する。
    *   クラス名は引数で指定されたフォルダからの相対パスでテスト実行ファイルを表したもので、
        パス区切り文字をドット文字に置換したものとなる。
    *   クラス名は結果レポートファイルの名前として利用される。


Expect
------
### 機能
引数で指定されたテストケースを以下の手順で実行する。

1.  **B.テストデータクリア条件**に定義された条件で指定されたテーブル上のレコードを削除する。
2.  **C.テストデータ**に定義されたデータを指定されたテーブルに追加する。
3.  **D.パラメタ**に定義されたコマンドにより、テスト対象スクリプトを呼び出す。
4.  **E.取得データ**に定義された予想結果と実際のコマンド呼び出し結果を比較チェックする。
5.  **F.更新後データ**に定義されたテーブルの予想結果と実際のテーブルの状態を比較チェックする。

**D.パラメタ**が定義されていないとエラーになる。  
その他のセクションに関しては省略可能。


### 呼び出し形式
```bash
java -cp <クラスパス> com.xpfriend.fixture.runner.Expect <Excelファイルパス> [シート名] [テストケース名] [-debug] [-server] [-class <クラス名>]
```

*   テストケース名を省略した場合は、指定されたシートの全テストケースが実行され、
    シート名およびテストケース名が省略された場合は、
    指定されたファイルにある全シートの全テストケースが実行される。
*   -debug を指定するとデバッグモードで起動する。
*   -server を指定すると FixtureBookServer 上で実行が行われる。
*   -class を指定すると結果出力ファイルの名前が指定された名前になる（デフォルトは Excel ファイル名と同じになる）。
*   Exec から呼び出されるスクリプトの中でこのコマンドを呼び出す場合には、
    引数指定の末尾に呼び出し元引数の指定（バッチファイルならば `%*`、bash ならば `"$@"`）を追加することにより、
    -debug, -server, -class 指定を追加することができます。



Setup
-----
### 機能
引数で指定されたテストケースを以下の手順で実行する。

1.  **B.テストデータクリア条件**に定義された条件で指定されたテーブル上のレコードを削除する。
2.  **C.テストデータ**に定義されたデータを指定されたテーブルに追加する。

### 呼び出し形式
```bash
java -cp <クラスパス> com.xpfriend.fixture.runner.Setup <Excelファイルパス> [シート名] [テストケース名] [-debug] [-server] [-class <クラス名>]
```

*   テストケース名を省略した場合は、指定されたシートの全テストケースが実行され、
    シート名およびテストケース名が省略された場合は、
    指定されたファイルにある全シートの全テストケースが実行される。
*   -debug を指定するとデバッグモードで起動する。
*   -server を指定すると FixtureBookServer 上で実行が行われる。
*   -class を指定すると結果出力ファイルの名前が指定された名前になる（デフォルトは Excel ファイル名と同じになる）。
*   Exec から呼び出されるスクリプトの中でこのコマンドを呼び出す場合には、
    引数指定の末尾に呼び出し元引数の指定（バッチファイルならば `%*`、bash ならば `"$@"`）を追加することにより、
    -debug, -server, -class 指定を追加することができます。


ValidateStorage
---------------
### 機能
引数で指定されたテストケースの**F.更新後データ**に定義されたテーブルの予想結果と実際のテーブルの状態を比較チェックする。

### 呼び出し形式
```bash
java -cp <クラスパス> com.xpfriend.fixture.runner.ValidateStorage <Excelファイルパス> [シート名] [テストケース名] [-debug] [-server] [-class <クラス名>]
```

*   テストケース名を省略した場合は、指定されたシートの全テストケースが実行され、
    シート名およびテストケース名が省略された場合は、
    指定されたファイルにある全シートの全テストケースが実行される。
*   -debug を指定するとデバッグモードで起動する。
*   -server を指定すると FixtureBookServer 上で実行が行われる。
*   -class を指定すると結果出力ファイルの名前が指定された名前になる（デフォルトは Excel ファイル名と同じになる）。
*   Exec から呼び出されるスクリプトの中でこのコマンドを呼び出す場合には、
    引数指定の末尾に呼び出し元引数の指定（バッチファイルならば `%*`、bash ならば `"$@"`）を追加することにより、
    -debug, -server, -class 指定を追加することができます。
